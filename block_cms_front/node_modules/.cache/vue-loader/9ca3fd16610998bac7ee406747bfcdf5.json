{"remainingRequest":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\src\\views\\admin\\channel\\Add.vue?vue&type=style&index=0&id=de31ccea&scoped=true&lang=css&","dependencies":[{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\src\\views\\admin\\channel\\Add.vue","mtime":1653636145979},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1645012155022},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1645012168595},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\postcss-loader\\src\\index.js","mtime":1645012162182},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645012147060},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1645012163094}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmF2YXRhci11cGxvYWRlciB7DQogIGJvcmRlcjogMXB4IGRhc2hlZCAjZDlkOWQ5Ow0KICBib3JkZXItcmFkaXVzOiA2cHg7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgd2lkdGg6IDgwcHg7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCi5hdmF0YXItdXBsb2FkZXI6aG92ZXIgew0KICBib3JkZXItY29sb3I6ICM0MDllZmY7DQp9DQouYXZhdGFyLXVwbG9hZGVyLWljb24gew0KICBmb250LXNpemU6IDI4cHg7DQogIGNvbG9yOiAjOGM5MzlkOw0KICB3aWR0aDogODBweDsNCiAgaGVpZ2h0OiA4MHB4Ow0KICBsaW5lLWhlaWdodDogODBweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLmF2YXRhciB7DQogIHdpZHRoOiA4MHB4Ow0KICBoZWlnaHQ6IDgwcHg7DQogIGRpc3BsYXk6IGJsb2NrOw0KfQ0K"},{"version":3,"sources":["Add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Add.vue","sourceRoot":"src/views/admin/channel","sourcesContent":["<template>\r\n  <div>\r\n    <el-form ref=\"defForm\" :rules=\"rules\" :model=\"defForm\" label-width=\"120px\">\r\n      <el-form-item label=\"栏目名\" prop=\"name\">\r\n        <el-input v-model=\"defForm.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"父栏目\" prop=\"parentId\">\r\n        <Treeselect\r\n          v-model=\"defForm.parentId\"\r\n          :multiple=\"false\"\r\n          :options=\"treeData\"\r\n          placeholder=\"请选择父栏目\"\r\n        ></Treeselect>\r\n      </el-form-item>\r\n      <el-form-item label=\"栏目图片\" prop=\"channelImg\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          action=\"string\"\r\n          :show-file-list=\"false\"\r\n          :http-request=\"uploadImg\"\r\n          :before-upload=\"beforeAvatarUpload\"\r\n        >\r\n          <img\r\n            v-if=\"defForm.channelImg\"\r\n            :src=\"defForm.channelImg\"\r\n            class=\"avatar\"\r\n          />\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"摘要\" prop=\"summary\">\r\n        <el-input v-model=\"defForm.summary\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"位置\" prop=\"pos\">\r\n        <el-select v-model=\"defForm.pos\" placeholder=\"请选择位置\">\r\n          <el-option\r\n            v-for=\"item in this.posList\"\r\n            :key=\"item\"\r\n            :label=\"item\"\r\n            :value=\"item\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"是否单页\" prop=\"single\">\r\n        <el-switch\r\n          v-model=\"defForm.single\"\r\n          active-color=\"#13ce66\"\r\n          inactive-color=\"#999999\"\r\n        >\r\n        </el-switch>\r\n      </el-form-item>\r\n      <el-form-item label=\"外链\" prop=\"url\">\r\n        <el-input v-model=\"defForm.url\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"seo title\" prop=\"seoTitle\">\r\n        <el-input v-model=\"defForm.seoTitle\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"seo keyword\" prop=\"seoKeyword\">\r\n        <el-input v-model=\"defForm.seoKeyword\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"seo description\" prop=\"seoDescription\">\r\n        <el-input v-model=\"defForm.seoDescription\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"content\" prop=\"content\">\r\n        <v-md-editor v-model=\"defForm.content\" height=\"400px\"></v-md-editor>\r\n      </el-form-item>\r\n\r\n      <el-form-item size=\"large\">\r\n        <el-button type=\"primary\" @click=\"$router.back()\">返回</el-button>\r\n        <el-button type=\"primary\" :loading=\"loading\" @click=\"submitForm\"\r\n          >保存</el-button\r\n        >\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { create, tree, upload } from \"../../../api/channel\";\r\n// import the component\r\nimport Treeselect from \"@riophae/vue-treeselect\";\r\n// import the styles\r\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\r\n\r\nexport default {\r\n  name: \"Add\",\r\n  components: { Treeselect },\r\n  data() {\r\n    return {\r\n      defForm: {\r\n        name: \"\",\r\n        parentId: null,\r\n        channelImg: \"\",\r\n        summary: \"\",\r\n        single: false,\r\n        url: \"\",\r\n        pos: \"A\",\r\n        seoTitle: \"\",\r\n        seoKeyword: \"\",\r\n        seoDescription: \"\",\r\n        content: \"\",\r\n      },\r\n      rules: {\r\n        userName: [{ required: true, message: \"必填项不能为空\" }],\r\n        password: [{ required: true, message: \"必填项不能为空\" }],\r\n      },\r\n      treeData: [],\r\n      posList: [\"A\", \"B\", \"C\"],\r\n      loading: false,\r\n    };\r\n  },\r\n  created() {\r\n    tree()\r\n      .then((data) => {\r\n        this.treeData = data.data;\r\n      })\r\n      .catch(() => {});\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      this.$refs[\"defForm\"].validate((valid) => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          if (this.defForm.single) {\r\n            this.defForm.single = \"Y\";\r\n          } else {\r\n            this.defForm.single = \"N\";\r\n          }\r\n          create(this.defForm)\r\n            .then((data) => {\r\n              this.loading = false;\r\n              this.$refs[\"defForm\"].resetFields();\r\n              this.$message.success(data.msg);\r\n              this.$router.push(\"/channel\");\r\n            })\r\n            .catch((error) => {\r\n              this.loading = false;\r\n              this.$message.error(error);\r\n            });\r\n        }\r\n      });\r\n    },\r\n    close() {\r\n      this.$emit(\"hideDialog\");\r\n    },\r\n    uploadImg(param) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", param.file);\r\n      upload(formData)\r\n        .then((data) => {\r\n          this.defForm.channelImg = data.data;\r\n        })\r\n        .catch((error) => {\r\n          this.$message.error(error);\r\n        });\r\n    },\r\n    //上传之前的验证\r\n    beforeAvatarUpload(file) {\r\n      const isIMAGE =\r\n        file.type === \"image/jpeg\" ||\r\n        file.type === \"image/jpg\" ||\r\n        file.type === \"image/png\";\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n      if (!isIMAGE) {\r\n        this.$message.error(\"上传文件只能是图片格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传文件大小不能超过 2MB!\");\r\n      }\r\n      return isIMAGE && isLt2M;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.avatar-uploader {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  width: 80px;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 80px;\r\n  height: 80px;\r\n  line-height: 80px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 80px;\r\n  height: 80px;\r\n  display: block;\r\n}\r\n</style>"]}]}