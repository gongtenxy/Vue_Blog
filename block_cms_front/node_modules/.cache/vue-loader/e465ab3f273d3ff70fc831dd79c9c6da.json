{"remainingRequest":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\src\\views\\admin\\article\\Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\src\\views\\admin\\article\\Edit.vue","mtime":1645491901424},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645012147060},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1645012162188},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645012147060},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1645012163094}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyB1cGRhdGUsIHVwbG9hZCwgZGV0YWlsIH0gZnJvbSAiLi4vLi4vLi4vYXBpL2FydGljbGUiOw0KaW1wb3J0IHsgdHJlZSB9IGZyb20gIi4uLy4uLy4uL2FwaS9jaGFubmVsIjsNCmltcG9ydCB7IGFsbCB9IGZyb20gIi4uLy4uLy4uL2FwaS90YWciOw0KLy8gaW1wb3J0IHRoZSBjb21wb25lbnQNCmltcG9ydCBUcmVlc2VsZWN0IGZyb20gIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0IjsNCi8vIGltcG9ydCB0aGUgc3R5bGVzDQppbXBvcnQgIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzIjsNCg0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogIkVkaXQiLA0KICAgIGNvbXBvbmVudHM6IHsgVHJlZXNlbGVjdCB9LA0KICAgIGRhdGEoKXsNCiAgICAgIHJldHVybiB7DQogICAgICAgIHRhZ0xpc3Q6IFtdLA0KICAgICAgICBkZWZGb3JtOnsNCiAgICAgICAgICBpZDonJywNCiAgICAgICAgICB0aXRsZTonJywNCiAgICAgICAgICBjaGFubmVsSWQ6bnVsbCwNCiAgICAgICAgICB0aXRsZUltZzonJywNCiAgICAgICAgICBzdW1tYXJ5OicnLA0KICAgICAgICAgIGNvbW1lbnRTdGF0dXM6dHJ1ZSwNCiAgICAgICAgICByb3RhdGlvbjpmYWxzZSwNCiAgICAgICAgICB1cmw6JycsDQogICAgICAgICAgYXV0aG9yOicnLA0KICAgICAgICAgIHRvcDpmYWxzZSwNCiAgICAgICAgICBjb250ZW50OicnLA0KICAgICAgICAgIGF0dGFjaG1lbnRMaXN0OiBbXSwNCiAgICAgICAgICBzZWxlY3RUYWdMaXN0OltdLA0KICAgICAgICB9LA0KICAgICAgICB0cmVlRGF0YTpbXSwNCiAgICAgICAgbG9hZGluZzpmYWxzZSwNCiAgICAgICAgcnVsZXM6ew0KICAgICAgICAgIHRpdGxlOlt7cmVxdWlyZWQ6dHJ1ZSxtZXNzYWdlOiflv4XloavpobnkuI3og73kuLrnqbonfV0sDQogICAgICAgICAgY2hhbm5lbElkOlt7cmVxdWlyZWQ6dHJ1ZSxtZXNzYWdlOiflv4XloavpobnkuI3og73kuLrnqbonfV0sDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KDQogICAgY3JlYXRlZCgpIHsNCg0KICAgICAgbGV0IGlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQNCiAgICAgIGRldGFpbChpZCkudGhlbihkYXRhPT57DQoNCiAgICAgICAgdGhpcy5kZWZGb3JtID0gZGF0YS5kYXRhDQogICAgICAgIGlmKCF0aGlzLmRlZkZvcm0uYXR0YWNobWVudExpc3Qpew0KICAgICAgICAgIHRoaXMuZGVmRm9ybS5hdHRhY2htZW50TGlzdD0gW10NCiAgICAgICAgfQ0KICAgICAgICBpZighdGhpcy5kZWZGb3JtLnNlbGVjdFRhZ0xpc3Qpew0KICAgICAgICAgIHRoaXMuZGVmRm9ybS5zZWxlY3RUYWdMaXN0PSBbXQ0KICAgICAgICB9DQogICAgICAgIGlmKCFkYXRhLmRhdGEuY29udGVudCl7DQogICAgICAgICAgdGhpcy5kZWZGb3JtLmNvbnRlbnQ9JycNCiAgICAgICAgfQ0KICAgICAgICBpZih0aGlzLmRlZkZvcm0uY29tbWVudFN0YXR1cyAhPSAxKXsNCiAgICAgICAgICB0aGlzLmRlZkZvcm0uY29tbWVudFN0YXR1cz0gdHJ1ZQ0KICAgICAgICB9DQogICAgICAgIGlmKHRoaXMuZGVmRm9ybS5yb3RhdGlvbiA9PSAxKXsNCiAgICAgICAgICB0aGlzLmRlZkZvcm0ucm90YXRpb249IHRydWUNCiAgICAgICAgfQ0KICAgICAgICBpZih0aGlzLmRlZkZvcm0udG9wID09IDEpew0KICAgICAgICAgIHRoaXMuZGVmRm9ybS50b3A9IHRydWUNCiAgICAgICAgfQ0KDQogICAgICB9KS5jYXRjaChlcnJvcj0+ew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycm9yKQ0KICAgICAgfSkNCg0KICAgICAgdHJlZSgpLnRoZW4oZGF0YT0+ew0KICAgICAgICB0aGlzLnRyZWVEYXRhID0gZGF0YS5kYXRhDQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMudHJlZURhdGEpDQogICAgICB9KS5jYXRjaChlcnJvcj0+ew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycm9yKQ0KICAgICAgfSkNCiAgICAgIGFsbCgpLnRoZW4oZGF0YSA9PnsNCiAgICAgICAgY29uc29sZS5sb2coZGF0YSkNCiAgICAgICAgdGhpcy50YWdMaXN0ID0gZGF0YS5kYXRhDQogICAgICB9KS5jYXRjaChlcnJvcj0+ew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycm9yKQ0KICAgICAgfSkNCg0KDQogICAgfSwNCiAgICBtZXRob2RzOnsNCiAgICAgIHN1Ym1pdEZvcm0oKXsNCiAgICAgICAgdGhpcy4kcmVmc1snZGVmRm9ybSddLnZhbGlkYXRlKHZhbGlkPT57DQogICAgICAgICAgaWYodmFsaWQpew0KICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQ0KICAgICAgICAgICAgaWYodGhpcy5kZWZGb3JtLmNvbW1lbnRTdGF0dXMpew0KICAgICAgICAgICAgICB0aGlzLmRlZkZvcm0uY29tbWVudFN0YXR1cyA9IDA7DQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgdGhpcy5kZWZGb3JtLmNvbW1lbnRTdGF0dXMgPSAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYodGhpcy5kZWZGb3JtLnJvdGF0aW9uKXsNCiAgICAgICAgICAgICAgdGhpcy5kZWZGb3JtLnJvdGF0aW9uID0gMTsNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICB0aGlzLmRlZkZvcm0ucm90YXRpb24gPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYodGhpcy5kZWZGb3JtLnRvcCl7DQogICAgICAgICAgICAgIHRoaXMuZGVmRm9ybS50b3AgPSAxOw0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgIHRoaXMuZGVmRm9ybS50b3AgPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdXBkYXRlKHRoaXMuZGVmRm9ybSkudGhlbihkYXRhPT57DQogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICAgIHRoaXMuJHJlZnNbJ2RlZkZvcm0nXS5yZXNldEZpZWxkcygpDQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhkYXRhLm1zZykNCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9hcnRpY2xlIikNCiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yPT57DQogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyb3IpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0sDQogICAgICBjbG9zZSgpew0KICAgICAgICB0aGlzLiRlbWl0KCJoaWRlRGlhbG9nIikNCiAgICAgIH0sDQogICAgICB1cGxvYWRJbWcocGFyYW0pew0KICAgICAgICBjb25zdCAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlIixwYXJhbS5maWxlKQ0KICAgICAgICB1cGxvYWQoZm9ybURhdGEpLnRoZW4oZGF0YT0+ew0KICAgICAgICAgIHRoaXMuZGVmRm9ybS50aXRsZUltZyA9IGRhdGEuZGF0YQ0KICAgICAgICB9KS5jYXRjaChlcnJvcj0+ew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyb3IpDQogICAgICAgIH0pDQogICAgICB9LA0KICAgICAgdXBsb2FkSW1nMihwYXJhbSl7DQogICAgICAgIGNvbnN0ICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLHBhcmFtLmZpbGUpDQogICAgICAgIHVwbG9hZChmb3JtRGF0YSkudGhlbihkYXRhPT57DQogICAgICAgICAgdGhpcy5kZWZGb3JtLmF0dGFjaG1lbnRMaXN0LnB1c2goe25hbWU6cGFyYW0uZmlsZS5uYW1lLHVybDpkYXRhLmRhdGF9KQ0KICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGVmRm9ybS5hdHRhY2htZW50TGlzdCkNCiAgICAgICAgfSkuY2F0Y2goZXJyb3I9PnsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycm9yKQ0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIC8v5LiK5Lyg5LmL5YmN55qE6aqM6K+BDQogICAgICBiZWZvcmVBdmF0YXJVcGxvYWQoZmlsZSl7DQogICAgICAgIGNvbnN0IGlzSU1BR0UgPSAoZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZycpIHx8ICAoZmlsZS50eXBlID09PSAnaW1hZ2UvanBnJykgfHwgKGZpbGUudHlwZSA9PT0naW1hZ2UvcG5nJykNCiAgICAgICAgY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyDQogICAgICAgIGlmICghaXNJTUFHRSkgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOaWh+S7tuWPquiDveaYr+WbvueJh+agvOW8jyEnKQ0KICAgICAgICB9DQogICAgICAgIGlmICghaXNMdDJNKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5paH5Lu25aSn5bCP5LiN6IO96LaF6L+HIDJNQiEnKQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBpc0lNQUdFICYmIGlzTHQyTQ0KICAgICAgfSwNCiAgICAgIGhhbmRsZUV4Y2VlZChmaWxlcywgZmlsZUxpc3QpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKGDlvZPliY3pmZDliLbpgInmi6kgMyDkuKrmlofku7bvvIzmnKzmrKHpgInmi6nkuoYgJHtmaWxlcy5sZW5ndGh9IOS4quaWh+S7tu+8jOWFsemAieaLqeS6hiAke2ZpbGVzLmxlbmd0aCArIGZpbGVMaXN0Lmxlbmd0aH0g5Liq5paH5Lu2YCk7DQogICAgICB9LA0KICAgICAgYmVmb3JlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7DQogICAgICAgIGZpbGVMaXN0LmZvckVhY2goKGl0ZW0saW5kZXgpPT57DQogICAgICAgICAgaWYoZmlsZS5uYW1lID09IGl0ZW0ubmFtZSl7DQogICAgICAgICAgICB0aGlzLmRlZkZvcm0uYXR0YWNobWVudExpc3Quc3BsaWNlKGluZGV4LDEpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0sDQogICAgfQ0KICB9DQo="},{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Edit.vue","sourceRoot":"src/views/admin/article","sourcesContent":["<template>\r\n  <div>\r\n    <el-form ref=\"defForm\" :rules=\"rules\" :model=\"defForm\" label-width=\"120px\">\r\n      <el-form-item label=\"标题\" prop=\"title\">\r\n        <el-input v-model=\"defForm.title\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"栏目\" prop=\"channelId\">\r\n        <treeselect v-model=\"defForm.channelId\" placeholder=\"请选择栏目\" :multiple=\"false\" :options=\"treeData\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"栏目图\" prop=\"channelImg\">\r\n        <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"string\"\r\n            :show-file-list=\"false\"\r\n            :http-request=\"uploadImg\"\r\n            :before-upload=\"beforeAvatarUpload\">\r\n          <img v-if=\"defForm.titleImg\" :src=\"defForm.titleImg\" class=\"avatar\">\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n\r\n      </el-form-item>\r\n      <el-form-item label=\"摘要\" prop=\"summary\">\r\n        <el-input type=\"textarea\" :autosize=\"{ minRows: 3, maxRows: 5}\" v-model=\"defForm.summary\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"作者\" prop=\"author\">\r\n        <el-input v-model=\"defForm.author\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"外链\" prop=\"url\">\r\n        <el-input v-model=\"defForm.url\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"允许评论\" prop=\"commentStatus\">\r\n        <el-switch\r\n            v-model=\"defForm.commentStatus\"\r\n            active-color=\"#13ce66\"\r\n            inactive-color=\"#999999\">\r\n        </el-switch>\r\n      </el-form-item>\r\n      <el-form-item label=\"轮播\" prop=\"rotation\">\r\n        <el-switch\r\n            v-model=\"defForm.rotation\"\r\n            active-color=\"#13ce66\"\r\n            inactive-color=\"#999999\">\r\n        </el-switch>\r\n      </el-form-item>\r\n      <el-form-item label=\"置顶\" prop=\"top\">\r\n        <el-switch\r\n            v-model=\"defForm.top\"\r\n            active-color=\"#13ce66\"\r\n            inactive-color=\"#999999\">\r\n        </el-switch>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"标签\" prop=\"selectTagList\">\r\n        <el-checkbox-group v-model=\"defForm.selectTagList\">\r\n          <el-checkbox  v-for=\"(item,index) in tagList\" :key=\"index\" :label=\"item.id\" >{{item.tagName}}</el-checkbox>\r\n        </el-checkbox-group>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"附件\" prop=\"attachmentList\">\r\n        <el-upload\r\n            class=\"upload-demo\"\r\n            action=\"string\"\r\n            :before-remove=\"beforeRemove\"\r\n            multiple\r\n            :limit=\"3\"\r\n            :http-request=\"uploadImg2\"\r\n            :on-exceed=\"handleExceed\"\r\n            :file-list=\"defForm.attachmentList\">\r\n          <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n          <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>\r\n        </el-upload>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"content\" prop=\"content\">\r\n        <v-md-editor v-model=\"defForm.content\" height=\"400px\"></v-md-editor>\r\n      </el-form-item>\r\n      <el-form-item size=\"large\">\r\n        <el-button type=\"primary\" @click=\"$router.back()\" >返回</el-button>\r\n        <el-button type=\"primary\" :loading=\"loading\" @click=\"submitForm\">保存</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { update, upload, detail } from \"../../../api/article\";\r\nimport { tree } from \"../../../api/channel\";\r\nimport { all } from \"../../../api/tag\";\r\n// import the component\r\nimport Treeselect from \"@riophae/vue-treeselect\";\r\n// import the styles\r\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\r\n\r\n\r\nexport default {\r\n    name: \"Edit\",\r\n    components: { Treeselect },\r\n    data(){\r\n      return {\r\n        tagList: [],\r\n        defForm:{\r\n          id:'',\r\n          title:'',\r\n          channelId:null,\r\n          titleImg:'',\r\n          summary:'',\r\n          commentStatus:true,\r\n          rotation:false,\r\n          url:'',\r\n          author:'',\r\n          top:false,\r\n          content:'',\r\n          attachmentList: [],\r\n          selectTagList:[],\r\n        },\r\n        treeData:[],\r\n        loading:false,\r\n        rules:{\r\n          title:[{required:true,message:'必填项不能为空'}],\r\n          channelId:[{required:true,message:'必填项不能为空'}],\r\n        }\r\n      }\r\n    },\r\n\r\n    created() {\r\n\r\n      let id = this.$route.query.id\r\n      detail(id).then(data=>{\r\n\r\n        this.defForm = data.data\r\n        if(!this.defForm.attachmentList){\r\n          this.defForm.attachmentList= []\r\n        }\r\n        if(!this.defForm.selectTagList){\r\n          this.defForm.selectTagList= []\r\n        }\r\n        if(!data.data.content){\r\n          this.defForm.content=''\r\n        }\r\n        if(this.defForm.commentStatus != 1){\r\n          this.defForm.commentStatus= true\r\n        }\r\n        if(this.defForm.rotation == 1){\r\n          this.defForm.rotation= true\r\n        }\r\n        if(this.defForm.top == 1){\r\n          this.defForm.top= true\r\n        }\r\n\r\n      }).catch(error=>{\r\n        this.$message.error(error)\r\n      })\r\n\r\n      tree().then(data=>{\r\n        this.treeData = data.data\r\n        console.log(this.treeData)\r\n      }).catch(error=>{\r\n        this.$message.error(error)\r\n      })\r\n      all().then(data =>{\r\n        console.log(data)\r\n        this.tagList = data.data\r\n      }).catch(error=>{\r\n        this.$message.error(error)\r\n      })\r\n\r\n\r\n    },\r\n    methods:{\r\n      submitForm(){\r\n        this.$refs['defForm'].validate(valid=>{\r\n          if(valid){\r\n            this.loading = true\r\n            if(this.defForm.commentStatus){\r\n              this.defForm.commentStatus = 0;\r\n            }else{\r\n              this.defForm.commentStatus = 1;\r\n            }\r\n            if(this.defForm.rotation){\r\n              this.defForm.rotation = 1;\r\n            }else{\r\n              this.defForm.rotation = 0;\r\n            }\r\n            if(this.defForm.top){\r\n              this.defForm.top = 1;\r\n            }else{\r\n              this.defForm.top = 0;\r\n            }\r\n            update(this.defForm).then(data=>{\r\n              this.loading = false\r\n              this.$refs['defForm'].resetFields()\r\n              this.$message.success(data.msg)\r\n              this.$router.push(\"/article\")\r\n            }).catch(error=>{\r\n              this.loading = false\r\n              this.$message.error(error)\r\n            })\r\n          }\r\n        })\r\n      },\r\n      close(){\r\n        this.$emit(\"hideDialog\")\r\n      },\r\n      uploadImg(param){\r\n        const  formData = new FormData();\r\n        formData.append(\"file\",param.file)\r\n        upload(formData).then(data=>{\r\n          this.defForm.titleImg = data.data\r\n        }).catch(error=>{\r\n          this.$message.error(error)\r\n        })\r\n      },\r\n      uploadImg2(param){\r\n        const  formData = new FormData();\r\n        formData.append(\"file\",param.file)\r\n        upload(formData).then(data=>{\r\n          this.defForm.attachmentList.push({name:param.file.name,url:data.data})\r\n          console.log(this.defForm.attachmentList)\r\n        }).catch(error=>{\r\n          this.$message.error(error)\r\n        })\r\n      },\r\n      //上传之前的验证\r\n      beforeAvatarUpload(file){\r\n        const isIMAGE = (file.type === 'image/jpeg') ||  (file.type === 'image/jpg') || (file.type ==='image/png')\r\n        const isLt2M = file.size / 1024 / 1024 < 2\r\n        if (!isIMAGE) {\r\n          this.$message.error('上传文件只能是图片格式!')\r\n        }\r\n        if (!isLt2M) {\r\n          this.$message.error('上传文件大小不能超过 2MB!')\r\n        }\r\n        return isIMAGE && isLt2M\r\n      },\r\n      handleExceed(files, fileList) {\r\n        this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\r\n      },\r\n      beforeRemove(file, fileList) {\r\n        fileList.forEach((item,index)=>{\r\n          if(file.name == item.name){\r\n            this.defForm.attachmentList.splice(index,1);\r\n          }\r\n        })\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.avatar-uploader {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  width: 80px;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 80px;\r\n  height: 80px;\r\n  line-height: 80px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 80px;\r\n  height: 80px;\r\n  display: block;\r\n}\r\n</style>"]}]}