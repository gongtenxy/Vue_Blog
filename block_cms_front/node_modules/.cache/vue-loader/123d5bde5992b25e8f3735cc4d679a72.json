{"remainingRequest":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\src\\views\\admin\\friendlink\\Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\src\\views\\admin\\friendlink\\Edit.vue","mtime":1645500615647},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645012147060},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1645012162188},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645012147060},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1645012163094}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7dXBkYXRlLHVwbG9hZCxkZXRhaWx9IGZyb20gJy4uLy4uLy4uL2FwaS9mcmllbmRsaW5rJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkVkaXQiLAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIGRlZkZvcm06ewogICAgICAgIHRpdGxlOicnLAogICAgICAgIHVybDonJywKICAgICAgICB0YXJnZXQ6J19ibGFuaycsCiAgICAgICAgcGF0aDonJywKICAgICAgfSwKICAgICAgbG9hZGluZzpmYWxzZSwKICAgICAgcnVsZXM6ewogICAgICAgIHRpdGxlOlt7cmVxdWlyZWQ6dHJ1ZSxtZXNzYWdlOiflv4XloavpobnkuI3og73kuLrnqbonfV0sCiAgICAgICAgdXJsOlt7cmVxdWlyZWQ6dHJ1ZSxtZXNzYWdlOiflv4XloavpobnkuI3og73kuLrnqbonfV0sCiAgICAgIH0KICAgIH0KICB9LAoKICBjcmVhdGVkKCkgewogICAgbGV0IGlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQKICAgIGRldGFpbChpZCkudGhlbihkYXRhPT57CiAgICAgIHRoaXMuZGVmRm9ybSA9IGRhdGEuZGF0YQogICAgfSkuY2F0Y2goZXJyb3I9PnsKICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnJvcikKICAgIH0pCiAgfSwKICBtZXRob2RzOnsKICAgIHN1Ym1pdEZvcm0oKXsKICAgICAgdGhpcy4kcmVmc1snZGVmRm9ybSddLnZhbGlkYXRlKHZhbGlkPT57CiAgICAgICAgaWYodmFsaWQpewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICAgICAgdXBkYXRlKHRoaXMuZGVmRm9ybSkudGhlbihkYXRhPT57CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMuJHJlZnNbJ2RlZkZvcm0nXS5yZXNldEZpZWxkcygpCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhkYXRhLm1zZykKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9mcmllbmQnKQogICAgICAgICAgfSkuY2F0Y2goZXJyb3I9PnsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnJvcikKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGNsb3NlKCl7CiAgICAgIHRoaXMuJGVtaXQoImhpZGVEaWFsb2ciKQogICAgfSwKICAgIHVwbG9hZEltZyhwYXJhbSl7CiAgICAgIGNvbnN0ICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLHBhcmFtLmZpbGUpCiAgICAgIHVwbG9hZChmb3JtRGF0YSkudGhlbihkYXRhPT57CiAgICAgICAgdGhpcy5kZWZGb3JtLnBhdGggPSBkYXRhLmRhdGEKICAgICAgfSkuY2F0Y2goZXJyb3I9PnsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycm9yKQogICAgICB9KQogICAgfSwKICAgIC8v5LiK5Lyg5LmL5YmN55qE6aqM6K+BCiAgICBiZWZvcmVBdmF0YXJVcGxvYWQoZmlsZSl7CiAgICAgIGNvbnN0IGlzSU1BR0UgPSAoZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZycpIHx8ICAoZmlsZS50eXBlID09PSAnaW1hZ2UvanBnJykgfHwgKGZpbGUudHlwZSA9PT0naW1hZ2UvcG5nJykKICAgICAgY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyCiAgICAgIGlmICghaXNJTUFHRSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOaWh+S7tuWPquiDveaYr+WbvueJh+agvOW8jyEnKQogICAgICB9CiAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5paH5Lu25aSn5bCP5LiN6IO96LaF6L+HIDJNQiEnKQogICAgICB9CiAgICAgIHJldHVybiBpc0lNQUdFICYmIGlzTHQyTQogICAgfSwKICB9Cn0K"},{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Edit.vue","sourceRoot":"src/views/admin/friendlink","sourcesContent":["<template>\r\n  <div>\r\n    <el-form ref=\"defForm\" :rules=\"rules\" :model=\"defForm\" label-width=\"120px\">\r\n      <el-form-item label=\"标题\" prop=\"title\">\r\n        <el-input v-model=\"defForm.title\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"链接\" prop=\"url\">\r\n        <el-input v-model=\"defForm.url\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"打开方式\" prop=\"target\">\r\n        <el-radio v-model=\"defForm.target\" label=\"_blank\">新窗口</el-radio>\r\n        <el-radio v-model=\"defForm.target\" label=\"_self\">当前窗口</el-radio>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"图片\" prop=\"channelImg\">\r\n        <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"string\"\r\n            :show-file-list=\"false\"\r\n            :http-request=\"uploadImg\"\r\n            :before-upload=\"beforeAvatarUpload\">\r\n          <img v-if=\"defForm.path\" :src=\"defForm.path\" class=\"avatar\">\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n\r\n      <el-form-item size=\"large\">\r\n        <el-button type=\"primary\" @click=\"$router.back()\" >返回</el-button>\r\n        <el-button type=\"primary\" :loading=\"loading\" @click=\"submitForm\">保存</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {update,upload,detail} from '../../../api/friendlink'\r\n  export default {\r\n    name: \"Edit\",\r\n    data(){\r\n      return {\r\n        defForm:{\r\n          title:'',\r\n          url:'',\r\n          target:'_blank',\r\n          path:'',\r\n        },\r\n        loading:false,\r\n        rules:{\r\n          title:[{required:true,message:'必填项不能为空'}],\r\n          url:[{required:true,message:'必填项不能为空'}],\r\n        }\r\n      }\r\n    },\r\n\r\n    created() {\r\n      let id = this.$route.query.id\r\n      detail(id).then(data=>{\r\n        this.defForm = data.data\r\n      }).catch(error=>{\r\n        this.$message.error(error)\r\n      })\r\n    },\r\n    methods:{\r\n      submitForm(){\r\n        this.$refs['defForm'].validate(valid=>{\r\n          if(valid){\r\n            this.loading = true\r\n            update(this.defForm).then(data=>{\r\n              this.loading = false\r\n              this.$refs['defForm'].resetFields()\r\n              this.$message.success(data.msg)\r\n              this.$router.push('/friend')\r\n            }).catch(error=>{\r\n              this.loading = false\r\n              this.$message.error(error)\r\n            })\r\n          }\r\n        })\r\n      },\r\n      close(){\r\n        this.$emit(\"hideDialog\")\r\n      },\r\n      uploadImg(param){\r\n        const  formData = new FormData();\r\n        formData.append(\"file\",param.file)\r\n        upload(formData).then(data=>{\r\n          this.defForm.path = data.data\r\n        }).catch(error=>{\r\n          this.$message.error(error)\r\n        })\r\n      },\r\n      //上传之前的验证\r\n      beforeAvatarUpload(file){\r\n        const isIMAGE = (file.type === 'image/jpeg') ||  (file.type === 'image/jpg') || (file.type ==='image/png')\r\n        const isLt2M = file.size / 1024 / 1024 < 2\r\n        if (!isIMAGE) {\r\n          this.$message.error('上传文件只能是图片格式!')\r\n        }\r\n        if (!isLt2M) {\r\n          this.$message.error('上传文件大小不能超过 2MB!')\r\n        }\r\n        return isIMAGE && isLt2M\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .avatar-uploader{\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    width:80px;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 80px;\r\n    height: 80px;\r\n    line-height: 80px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 80px;\r\n    height: 80px;\r\n    display: block;\r\n  }\r\n</style>"]}]}