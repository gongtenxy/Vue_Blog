{"remainingRequest":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\src\\views\\admin\\channel\\Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\src\\views\\admin\\channel\\Edit.vue","mtime":1653636153798},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645012147060},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1645012162188},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645012147060},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1645012163094}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyB1cGRhdGUsIHRyZWUsIHVwbG9hZCwgZGV0YWlsIH0gZnJvbSAiLi4vLi4vLi4vYXBpL2NoYW5uZWwiOw0KLy8gaW1wb3J0IHRoZSBjb21wb25lbnQNCmltcG9ydCBUcmVlc2VsZWN0IGZyb20gIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0IjsNCi8vIGltcG9ydCB0aGUgc3R5bGVzDQppbXBvcnQgIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiRWRpdCIsDQogIGNvbXBvbmVudHM6IHsgVHJlZXNlbGVjdCB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkZWZGb3JtOiB7DQogICAgICAgIGlkOiAiIiwNCiAgICAgICAgbmFtZTogIiIsDQogICAgICAgIHBhcmVudElkOiBudWxsLA0KICAgICAgICBjaGFubmVsSW1nOiAiIiwNCiAgICAgICAgc3VtbWFyeTogIiIsDQogICAgICAgIHNpbmdsZTogZmFsc2UsDQogICAgICAgIHVybDogIiIsDQogICAgICAgIHNlb1RpdGxlOiAiIiwNCiAgICAgICAgc2VvS2V5d29yZDogIiIsDQogICAgICAgIHNlb0Rlc2NyaXB0aW9uOiAiIiwNCiAgICAgICAgY29udGVudDogIiIsDQogICAgICB9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgdXNlck5hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5b+F5aGr6aG55LiN6IO95Li656m6IiB9XSwNCiAgICAgICAgcGFzc3dvcmQ6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5b+F5aGr6aG55LiN6IO95Li656m6IiB9XSwNCiAgICAgIH0sDQogICAgICBwb3NMaXN0OlsnQScsJ0InLCdDJ10sDQogICAgICB0cmVlRGF0YTogW10sDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGxldCBpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOw0KICAgIGRldGFpbChpZCkNCiAgICAgIC50aGVuKChkYXRhKSA9PiB7DQogICAgICAgIHRoaXMuZGVmRm9ybSA9IGRhdGEuZGF0YTsNCiAgICAgICAgaWYgKCFkYXRhLmRhdGEuY29udGVudCkgew0KICAgICAgICAgIHRoaXMuZGVmRm9ybS5jb250ZW50ID0gIiI7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGRhdGEuZGF0YS5wYXJlbnRJZCA9PSAwKSB7DQogICAgICAgICAgdGhpcy5kZWZGb3JtLnBhcmVudElkID0gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoZGF0YS5kYXRhLnNpbmdsZSA9PSAiWSIpIHsNCiAgICAgICAgICB0aGlzLmRlZkZvcm0uc2luZ2xlID0gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmRlZkZvcm0uc2luZ2xlID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyb3IpOw0KICAgICAgfSk7DQoNCiAgICB0cmVlKCkNCiAgICAgIC50aGVuKChkYXRhKSA9PiB7DQogICAgICAgIHRoaXMudHJlZURhdGEgPSBkYXRhLmRhdGE7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMudHJlZURhdGEpOw0KICAgICAgfSkNCiAgICAgIC5jYXRjaCgoKSA9PiB7fSk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzdWJtaXRGb3JtKCkgew0KICAgICAgdGhpcy4kcmVmc1siZGVmRm9ybSJdLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRlZkZvcm0pOw0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICAgICAgaWYgKHRoaXMuZGVmRm9ybS5zaW5nbGUpIHsNCiAgICAgICAgICAgIHRoaXMuZGVmRm9ybS5zaW5nbGUgPSAiWSI7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuZGVmRm9ybS5zaW5nbGUgPSAiTiI7DQogICAgICAgICAgfQ0KICAgICAgICAgIHVwZGF0ZSh0aGlzLmRlZkZvcm0pDQogICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gew0KICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgdGhpcy4kcmVmc1siZGVmRm9ybSJdLnJlc2V0RmllbGRzKCk7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhkYXRhLm1zZyk7DQogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvY2hhbm5lbCIpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyb3IpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgY2xvc2UoKSB7DQogICAgICB0aGlzLiRlbWl0KCJoaWRlRGlhbG9nIik7DQogICAgfSwNCiAgICB1cGxvYWRJbWcocGFyYW0pIHsNCiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7DQogICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLCBwYXJhbS5maWxlKTsNCiAgICAgIHVwbG9hZChmb3JtRGF0YSkNCiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHsNCiAgICAgICAgICB0aGlzLmRlZkZvcm0uY2hhbm5lbEltZyA9IGRhdGEuZGF0YTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyb3IpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIC8v5LiK5Lyg5LmL5YmN55qE6aqM6K+BDQogICAgYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUpIHsNCiAgICAgIGNvbnN0IGlzSU1BR0UgPQ0KICAgICAgICBmaWxlLnR5cGUgPT09ICJpbWFnZS9qcGVnIiB8fA0KICAgICAgICBmaWxlLnR5cGUgPT09ICJpbWFnZS9qcGciIHx8DQogICAgICAgIGZpbGUudHlwZSA9PT0gImltYWdlL3BuZyI7DQogICAgICBjb25zdCBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDI7DQogICAgICBpZiAoIWlzSU1BR0UpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiK5Lyg5paH5Lu25Y+q6IO95piv5Zu+54mH5qC85byPISIpOw0KICAgICAgfQ0KICAgICAgaWYgKCFpc0x0Mk0pIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiK5Lyg5paH5Lu25aSn5bCP5LiN6IO96LaF6L+HIDJNQiEiKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBpc0lNQUdFICYmIGlzTHQyTTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Edit.vue","sourceRoot":"src/views/admin/channel","sourcesContent":["<template>\r\n  <div>\r\n    <el-form ref=\"defForm\" :rules=\"rules\" :model=\"defForm\" label-width=\"120px\">\r\n      <el-form-item label=\"栏目名\" prop=\"name\">\r\n        <el-input v-model=\"defForm.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"父栏目\" prop=\"parentId\">\r\n        <Treeselect\r\n          v-model=\"defForm.parentId\"\r\n          :multiple=\"false\"\r\n          :options=\"treeData\"\r\n          placeholder=\"请选择父栏目\"\r\n        ></Treeselect>\r\n      </el-form-item>\r\n      <el-form-item label=\"栏目图片\" prop=\"channelImg\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          action=\"string\"\r\n          :show-file-list=\"false\"\r\n          :http-request=\"uploadImg\"\r\n          :before-upload=\"beforeAvatarUpload\"\r\n        >\r\n          <img\r\n            v-if=\"defForm.channelImg\"\r\n            :src=\"defForm.channelImg\"\r\n            class=\"avatar\"\r\n          />\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"摘要\" prop=\"summary\">\r\n        <el-input v-model=\"defForm.summary\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"位置\" prop=\"pos\">\r\n        <el-select v-model=\"defForm.pos\" placeholder=\"请选择位置\">\r\n          <el-option\r\n            v-for=\"item in this.posList\"\r\n            :key=\"item\"\r\n            :label=\"item\"\r\n            :value=\"item\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"是否单页\" prop=\"single\">\r\n        <el-switch\r\n          v-model=\"defForm.single\"\r\n          active-color=\"#13ce66\"\r\n          inactive-color=\"#999999\"\r\n        >\r\n        </el-switch>\r\n      </el-form-item>\r\n      <el-form-item label=\"外链\" prop=\"url\">\r\n        <el-input v-model=\"defForm.url\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"seo title\" prop=\"seoTitle\">\r\n        <el-input v-model=\"defForm.seoTitle\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"seo keyword\" prop=\"seoKeyword\">\r\n        <el-input v-model=\"defForm.seoKeyword\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"seo description\" prop=\"seoDescription\">\r\n        <el-input v-model=\"defForm.seoDescription\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"content\" prop=\"content\">\r\n        <v-md-editor v-model=\"defForm.content\" height=\"400px\"></v-md-editor>\r\n      </el-form-item>\r\n\r\n      <el-form-item size=\"large\">\r\n        <el-button type=\"primary\" @click=\"$router.back()\">返回</el-button>\r\n        <el-button type=\"primary\" :loading=\"loading\" @click=\"submitForm\"\r\n          >保存</el-button\r\n        >\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { update, tree, upload, detail } from \"../../../api/channel\";\r\n// import the component\r\nimport Treeselect from \"@riophae/vue-treeselect\";\r\n// import the styles\r\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\r\n\r\nexport default {\r\n  name: \"Edit\",\r\n  components: { Treeselect },\r\n  data() {\r\n    return {\r\n      defForm: {\r\n        id: \"\",\r\n        name: \"\",\r\n        parentId: null,\r\n        channelImg: \"\",\r\n        summary: \"\",\r\n        single: false,\r\n        url: \"\",\r\n        seoTitle: \"\",\r\n        seoKeyword: \"\",\r\n        seoDescription: \"\",\r\n        content: \"\",\r\n      },\r\n      rules: {\r\n        userName: [{ required: true, message: \"必填项不能为空\" }],\r\n        password: [{ required: true, message: \"必填项不能为空\" }],\r\n      },\r\n      posList:['A','B','C'],\r\n      treeData: [],\r\n      loading: false,\r\n    };\r\n  },\r\n  created() {\r\n    let id = this.$route.query.id;\r\n    detail(id)\r\n      .then((data) => {\r\n        this.defForm = data.data;\r\n        if (!data.data.content) {\r\n          this.defForm.content = \"\";\r\n        }\r\n        if (data.data.parentId == 0) {\r\n          this.defForm.parentId = null;\r\n        }\r\n        if (data.data.single == \"Y\") {\r\n          this.defForm.single = true;\r\n        } else {\r\n          this.defForm.single = false;\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        this.$message.error(error);\r\n      });\r\n\r\n    tree()\r\n      .then((data) => {\r\n        this.treeData = data.data;\r\n        console.log(this.treeData);\r\n      })\r\n      .catch(() => {});\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      this.$refs[\"defForm\"].validate((valid) => {\r\n        if (valid) {\r\n          console.log(this.defForm);\r\n          this.loading = true;\r\n          if (this.defForm.single) {\r\n            this.defForm.single = \"Y\";\r\n          } else {\r\n            this.defForm.single = \"N\";\r\n          }\r\n          update(this.defForm)\r\n            .then((data) => {\r\n              this.loading = false;\r\n              this.$refs[\"defForm\"].resetFields();\r\n              this.$message.success(data.msg);\r\n              this.$router.push(\"/channel\");\r\n            })\r\n            .catch((error) => {\r\n              this.loading = false;\r\n              this.$message.error(error);\r\n            });\r\n        }\r\n      });\r\n    },\r\n    close() {\r\n      this.$emit(\"hideDialog\");\r\n    },\r\n    uploadImg(param) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", param.file);\r\n      upload(formData)\r\n        .then((data) => {\r\n          this.defForm.channelImg = data.data;\r\n        })\r\n        .catch((error) => {\r\n          this.$message.error(error);\r\n        });\r\n    },\r\n    //上传之前的验证\r\n    beforeAvatarUpload(file) {\r\n      const isIMAGE =\r\n        file.type === \"image/jpeg\" ||\r\n        file.type === \"image/jpg\" ||\r\n        file.type === \"image/png\";\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n      if (!isIMAGE) {\r\n        this.$message.error(\"上传文件只能是图片格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传文件大小不能超过 2MB!\");\r\n      }\r\n      return isIMAGE && isLt2M;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.avatar-uploader {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  width: 80px;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 80px;\r\n  height: 80px;\r\n  line-height: 80px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 80px;\r\n  height: 80px;\r\n  display: block;\r\n}\r\n</style>"]}]}