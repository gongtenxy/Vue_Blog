{"remainingRequest":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\src\\views\\front\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\src\\views\\front\\Detail.vue","mtime":1652018539331},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645012147060},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1645012162188},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645012147060},{"path":"F:\\Program Files (x86)\\vue博客系统\\block_cms_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1645012163094}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAnQC9hc3NldHMvY3NzL2Jhc2UuY3NzJwppbXBvcnQgJ0AvYXNzZXRzL2Nzcy9tLmNzcycKaW1wb3J0IEZIZWFkZXIgZnJvbSAiLi9GSGVhZGVyIgppbXBvcnQgRk9yZGVyIGZyb20gIi4vRk9yZGVyIgppbXBvcnQgRnJpZW5kTGluayBmcm9tICIuL0ZyaWVuZExpbmsiCmltcG9ydCBGb290ZXIgZnJvbSAiLi9Gb290ZXIiCmltcG9ydCBGVGFnIGZyb20gIi4vRlRhZyIKaW1wb3J0IHtnZXRBcnRpY2xlLGNvbW1lbnRfcXVlcnl9IGZyb20gIi4uLy4uL2FwaS9mb250IjsKaW1wb3J0IHtjcmVhdGV9IGZyb20gIi4uLy4uL2FwaS9jb21tZW50IjsKaW1wb3J0IHRva2VuIGZyb20gIi4uLy4uL3N0b3JlL3Rva2VuIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSW5kZXgiLAogIGNvbXBvbmVudHM6IHsKICAgIEZIZWFkZXIsIEZPcmRlciwgRnJpZW5kTGluayxGb290ZXIsRlRhZwogIH0sCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICBhcnRpY2xlOnt9LAogICAgICBjb21tZW50czpbXSwKICAgICAgbG9hZGluZzpmYWxzZSwKICAgICAgY29tbWVudEZvcm06ewogICAgICAgIGNvbnRlbnQ6JycsCiAgICAgIH0sCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgZ2V0QXJ0aWNsZSh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpLnRoZW4oZGF0YT0+ewogICAgICB0aGlzLmFydGljbGUgPSBkYXRhLmRhdGEKICAgICAgdGhpcy5hcnRpY2xlSWQgPSB0aGlzLmFydGljbGUuaWQKICAgIH0pCiAgICB0aGlzLnF1ZXJ5KHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CiAgfSwKICBiZWZvcmVSb3V0ZVVwZGF0ZSh0bywgZnJvbSwgbmV4dCl7CiAgICBjb25zb2xlLmxvZyh0by5wYXJhbXMpCiAgICBuZXh0KCkKICB9LAogIG1ldGhvZHM6ewogICAgcXVlcnkoYXJ0aWNsZUlkKXsKICAgICAgY29tbWVudF9xdWVyeShhcnRpY2xlSWQpLnRoZW4oZGF0YT0+ewogICAgICAgIHRoaXMuY29tbWVudHMgPSBkYXRhLmRhdGEKICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEpOwogICAgICB9KQogICAgfSwKICAgIHN1Ym1pdEZvcm0oKXsKICAgICAgaWYoIXRva2VuLmdldCgpKXsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+WFiOeZu+W9lScpCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmKHRoaXMuY29tbWVudEZvcm0uY29udGVudD09JycpewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+E6K665LiN6IO95Li656m6JykKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICB0aGlzLmNvbW1lbnRGb3JtLmFydGljbGVJZD10aGlzLmFydGljbGUuaWQKICAgICAgY3JlYXRlKHRoaXMuY29tbWVudEZvcm0pLnRoZW4ocmVzPT57CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZykKICAgICAgICB0aGlzLmNvbW1lbnRGb3JtLmNvbnRlbnQ9Jyc7CiAgICAgICAgdGhpcy5xdWVyeShyZXMuZGF0YS5hcnRpY2xlSWQpOwogICAgICB9KS5jYXRjaChlcnJvcj0+ewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/front","sourcesContent":["<template>\r\n<!-- 文章详情页面（点击了阅读更多后跳转） -->\r\n  <div v-title :data-title=\"article.title\">\r\n    <FHeader></FHeader>\r\n    <article>\r\n      <div class=\"lbox\">\r\n        <div class=\"content_box whitebg\">\r\n          <h2 class=\"htitle\"><span class=\"con_nav\">您现在的位置是：<a href=\"/\">网站首页</a>&gt;<a href=\"/\">博客正文</a></span>博客正文</h2>\r\n          <h1 class=\"con_tilte\">{{article.title}}</h1>\r\n          <p class=\"bloginfo\"><i class=\"avatar\"><img src=\"~@/assets/images/avatar.png\"></i><span>{{article.author}}</span><span>2018-10-28</span></p>\r\n          <p class=\"con_info\" v-if=\"article.summary\"><b>摘要</b>{{article.summary}}</p>\r\n          <div class=\"con_text\">\r\n            <v-md-preview :text=\"article.content\"></v-md-preview>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"whitebg lanmu\">\r\n          <h1>评论</h1>\r\n          <div class=\"com\" v-for=\"(item,index) in comments\" :key=\"index\">\r\n            <p style=\"float:left;width: 60px;\">\r\n              <img v-if=\"item.user && item.user.avatar\" :src=\"item.user.avatar\" class=\"author\">\r\n              <img v-else src=\"@/assets/images/avatar.png\" class=\"author\">\r\n            </p>\r\n            <p style=\"float:right;width: 760px;\">\r\n              <span style=\"font-size: 12px;\">{{item.createDate}}</span>\r\n              <br/>\r\n              {{item.content}}\r\n            </p>\r\n          </div>\r\n          <p>\r\n            <el-form ref=\"commentForm\" :model=\"commentForm\" style=\"width: 100%;padding: 10px;\">\r\n              <el-form-item prop=\"content\" align=\"left\">\r\n                <el-input type=\"textarea\" placeholder=\"评论输入...\" style=\"font-size: 12px;\" rows=\"4\" v-model.trim=\"commentForm.content\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" style=\"width:20%;\" :loading=\"loading\" @click=\"submitForm\">提交评论</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div class=\"rbox\">\r\n        <FOrder></FOrder>\r\n        <FTag></FTag>\r\n        <FriendLink></FriendLink>\r\n      </div>\r\n    </article>\r\n    <Footer></Footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import '@/assets/css/base.css'\r\n  import '@/assets/css/m.css'\r\n  import FHeader from \"./FHeader\"\r\n  import FOrder from \"./FOrder\"\r\n  import FriendLink from \"./FriendLink\"\r\n  import Footer from \"./Footer\"\r\n  import FTag from \"./FTag\"\r\n  import {getArticle,comment_query} from \"../../api/font\";\r\n  import {create} from \"../../api/comment\";\r\n  import token from \"../../store/token\";\r\n\r\n  export default {\r\n    name: \"Index\",\r\n    components: {\r\n      FHeader, FOrder, FriendLink,Footer,FTag\r\n    },\r\n    data(){\r\n      return{\r\n        article:{},\r\n        comments:[],\r\n        loading:false,\r\n        commentForm:{\r\n          content:'',\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n      getArticle(this.$route.params.id).then(data=>{\r\n        this.article = data.data\r\n        this.articleId = this.article.id\r\n      })\r\n      this.query(this.$route.params.id);\r\n    },\r\n    beforeRouteUpdate(to, from, next){\r\n      console.log(to.params)\r\n      next()\r\n    },\r\n    methods:{\r\n      query(articleId){\r\n        comment_query(articleId).then(data=>{\r\n          this.comments = data.data\r\n          console.log(data.data);\r\n        })\r\n      },\r\n      submitForm(){\r\n        if(!token.get()){\r\n          this.$message.warning('请先登录')\r\n          return;\r\n        }\r\n        if(this.commentForm.content==''){\r\n          this.$message.warning('评论不能为空')\r\n          return;\r\n        }\r\n        this.loading = true\r\n        this.commentForm.articleId=this.article.id\r\n        create(this.commentForm).then(res=>{\r\n          this.loading = false\r\n          this.$message.success(res.msg)\r\n          this.commentForm.content='';\r\n          this.query(res.data.articleId);\r\n        }).catch(error=>{\r\n          this.loading = false\r\n          console.log(error);\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.com{\r\n  margin: 10px;\r\n  font-size: 14px;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px dotted #cccccc;\r\n  display: inline-block;\r\n}\r\n.author{\r\n  border-radius: 20px;\r\n  border: 1px solid #cccccc;\r\n  height: 40px;\r\n  width: 40px;\r\n}\r\n\r\n</style>"]}]}